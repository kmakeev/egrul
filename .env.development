# ==============================================================================
# Development Environment Configuration
# ==============================================================================
# Настройки для локальной разработки
# ==============================================================================

# Debug logging
LOG_LEVEL=debug
LOG_FORMAT=json

# GraphQL настройки (все включено для разработки)
GRAPHQL_PLAYGROUND_ENABLED=true
GRAPHQL_INTROSPECTION_ENABLED=true

# Простые пароли для разработки
CLICKHOUSE_USER=egrul_app
CLICKHOUSE_PASSWORD=test
POSTGRES_PASSWORD=postgres
MINIO_ROOT_PASSWORD=minioadmin
GF_SECURITY_ADMIN_PASSWORD=admin

# Меньше ресурсов для локального окружения
CLICKHOUSE_MEMORY_LIMIT=16G
ES_JAVA_OPTS=-Xms512m -Xmx512m
KAFKA_HEAP_OPTS=-Xms512m -Xmx512m

# Настройки импорта для локальной работы
HISTORY_MAX_MEMORY=2000000000
HISTORY_BUCKETS=10
OPTIMIZE_AFTER_IMPORT=false

# Frontend debug mode
NEXT_PUBLIC_DEBUG=true
NODE_ENV=development
WATCHPACK_POLLING=true

# Маленькие батчи для быстрого тестирования
PARSER_BATCH_SIZE=1000
PARSER_CHANNEL_BUFFER_SIZE=5000

# Elasticsearch Sync Service (Development)
SYNC_MODE=incremental
SYNC_BATCH_SIZE=1000
SYNC_INTERVAL=5m
SYNC_LAST_TIMESTAMP_KEY=es:last_sync

# Elasticsearch Search
SEARCH_ENGINE=hybrid
ES_MAX_RESULTS=1000
ES_TIMEOUT=30s
ES_FALLBACK_TO_CH=true

# ==============================================================================
# Change Detection & Notification Services (Development)
# ==============================================================================

# Change Detection Service
CHANGE_DETECTION_SERVICE_PORT=8082
CHANGE_DETECTION_SERVICE_LOG_LEVEL=debug

# Notification Service
NOTIFICATION_SERVICE_PORT=8083
NOTIFICATION_SERVICE_LOG_LEVEL=debug

# ==============================================================================
# SMTP Configuration - MailHog для локальной разработки
# ==============================================================================

# MailHog (локальный SMTP для тестирования)
SMTP_HOST=mailhog
SMTP_PORT=1025
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM=noreply@egrul.local
SMTP_FROM_NAME=ЕГРЮЛ/ЕГРИП Мониторинг (DEV)
SMTP_TLS=false

# DRY RUN режим - только логирование, без реальной отправки email
# Для тестирования механизма подписок установите true
EMAIL_DRY_RUN=true

# ==============================================================================
# Kafka Topics (Development)
# ==============================================================================

KAFKA_BROKERS=kafka:9092
KAFKA_COMPANY_CHANGES_TOPIC=company-changes
KAFKA_ENTREPRENEUR_CHANGES_TOPIC=entrepreneur-changes
KAFKA_CONSUMER_GROUP=notification-service-group
KAFKA_PARTITION_COUNT=3
KAFKA_REPLICATION_FACTOR=1

# ==============================================================================
# PostgreSQL Subscriptions (Development)
# ==============================================================================

POSTGRES_SUBSCRIPTION_SCHEMA=subscriptions

# ==============================================================================
# JWT Authentication (Development)
# ==============================================================================

# Секретный ключ для подписи JWT токенов (минимум 32 символа)
JWT_SECRET_KEY=dev-secret-key-change-me-in-production-min-32-characters-long
# Время жизни токена (24 часа для разработки)
JWT_TOKEN_DURATION=24h

# ==============================================================================
# MinIO (избегаем конфликта с ClickHouse кластером: 9000-9005)
# ==============================================================================

MINIO_API_PORT=9010
MINIO_CONSOLE_PORT=9011

# Zookeeper (избегаем конфликта с ClickHouse Keeper на портах 2181-2183)
# Внутри контейнера Zookeeper всегда использует порт 2181
ZOOKEEPER_EXTERNAL_PORT=2184

# Kafka external port
KAFKA_EXTERNAL_BROKER=localhost:29093
