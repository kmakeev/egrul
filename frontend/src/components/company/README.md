# Компоненты страницы компании

Этот каталог содержит компоненты для детальной страницы компании из ЕГРЮЛ.

## Структура компонентов

### CompanyHeader
**Файл:** `company-header.tsx`

Заголовок страницы компании с основной информацией и действиями.

**Функциональность:**
- Отображение полного и сокращенного наименования
- Статус компании с цветовым индикатором
- ОГРН, ИНН, КПП
- Кнопки действий: "В избранное", "Скачать выписку", "Поделиться"

### CompanyTabs
**Файл:** `company-tabs.tsx`

Основной контейнер с табами для организации информации.

**Вкладки:**
1. Основная информация
2. Руководство и учредители
3. Виды деятельности
4. История изменений
5. Связанные компании

### CompanyInfo
**Файл:** `company-info.tsx`

Основная информация о компании.

**Отображает:**
- Адрес регистрации (с заглушкой для карты)
- Регистрационные данные (дата, орган, статус)
- Уставный капитал
- Основной вид деятельности (ОКВЭД)

### CompanyManagement
**Файл:** `company-management.tsx`

Информация о руководстве и учредителях.

**Функциональность:**
- Карточка руководителя (ФИО, должность, ИНН)
- Таблица учредителей с типом (ЮЛ/ФЛ), долями и суммами
- Загрузка данных через отдельный GraphQL запрос
- Skeleton loading состояния

### CompanyActivities
**Файл:** `company-activities.tsx`

Виды деятельности компании.

**Функциональность:**
- Выделенная карточка основного вида деятельности
- Список дополнительных видов деятельности
- Сворачиваемый список (показать все/скрыть)
- Загрузка данных через отдельный GraphQL запрос

### CompanyHistory
**Файл:** `company-history.tsx`

История изменений компании.

**Функциональность:**
- Timeline изменений с датами и типами
- Фильтр по типу изменения
- Раскрываемые детали каждой записи
- Цветовые индикаторы для разных типов изменений
- Загрузка данных через отдельный GraphQL запрос

### CompanyRelations
**Файл:** `company-relations.tsx`

Связанные компании и граф связей.

**Функциональность:**
- Заглушка для визуализации графа связей
- Список связанных компаний с типами связей
- Ссылки на страницы связанных компаний
- Цветовые индикаторы для типов связей и статусов
- Загрузка данных через отдельный GraphQL запрос

## API Хуки

### Основной хук
**Файл:** `../lib/api/hooks.ts`
- `useCompanyQuery(ogrn)` - основная информация о компании

### Дополнительные хуки
**Файл:** `../lib/api/company-hooks.ts`
- `useCompanyFoundersQuery(ogrn)` - учредители
- `useCompanyHistoryQuery(ogrn)` - история изменений
- `useCompanyActivitiesQuery(ogrn)` - виды деятельности
- `useCompanyRelationsQuery(ogrn)` - связанные компании

## SEO и мета-данные

### Файл метаданных
**Файл:** `../../app/(dashboard)/company/[ogrn]/metadata.ts`

**Функции:**
- `generateCompanyMetadata(company)` - генерация мета-тегов
- `generateCompanyJsonLd(company)` - JSON-LD структурированные данные

**SEO оптимизация:**
- Динамический title и description
- Open Graph мета-теги
- JSON-LD разметка для поисковых систем
- Canonical URL

## Состояния загрузки и ошибок

### Loading состояния
**Файл:** `../../app/(dashboard)/company/[ogrn]/loading.tsx`
- Skeleton компоненты для заголовка и табов

### Error состояния
**Файл:** `../../app/(dashboard)/company/[ogrn]/error.tsx`
- Обработка ошибок с возможностью повтора
- Детали ошибок в режиме разработки

## Типы данных

Расширенные типы в `../lib/api.ts`:
- `LegalEntity` - основная информация о компании
- `Founder` - учредитель
- `HistoryRecord` - запись истории изменений
- `RelatedCompany` - связанная компания
- `Activity` - вид деятельности

## Использование

```tsx
import { CompanyHeader } from "@/components/company/company-header";
import { CompanyTabs } from "@/components/company/company-tabs";

export default function CompanyPage() {
  const { data } = useCompanyQuery(ogrn);
  const company = data?.company;

  return (
    <div className="container mx-auto p-6 space-y-6">
      <CompanyHeader company={company} />
      <CompanyTabs company={company} />
    </div>
  );
}
```

## TODO

1. **Карта адреса** - интеграция с картографическим сервисом
2. **Граф связей** - визуализация связей между компаниями
3. **Экспорт данных** - функциональность скачивания выписки
4. **Избранное** - система сохранения компаний
5. **Уведомления** - отслеживание изменений в компаниях
6. **Аналитика** - дополнительные метрики и графики