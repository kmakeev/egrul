import type { LegalEntity } from "@/lib/api";

/**
 * Тестовые данные для разработки компонентов компании
 * Используются когда реальные данные из API недоступны
 */
export const mockCompanyData: LegalEntity = {
  id: "1",
  ogrn: "1027700132195",
  inn: "7707083893",
  kpp: "770701001",
  fullName: "ПУБЛИЧНОЕ АКЦИОНЕРНОЕ ОБЩЕСТВО \"СБЕРБАНК РОССИИ\"",
  shortName: "ПАО Сбербанк",
  status: "Действующая",
  registrationDate: "2012-07-17",
  registrationAuthority: "Межрайонная инспекция Федеральной налоговой службы № 46 по г. Москве",
  address: {
    postalCode: "117997",
    regionCode: "77",
    region: "г. Москва",
    city: "Москва",
    street: "ул. Вавилова",
    house: "19",
    fullAddress: "117997, г. Москва, ул. Вавилова, д. 19"
  },
  mainActivity: {
    code: "64.19",
    name: "Денежное посредничество прочее"
  },
  activities: [
    {
      code: "64.19",
      name: "Денежное посредничество прочее"
    },
    {
      code: "64.92",
      name: "Прочие виды кредитования"
    },
    {
      code: "66.19",
      name: "Прочая деятельность по предоставлению услуг в сфере финансов, кроме страхования и пенсионного обеспечения"
    },
    {
      code: "66.12",
      name: "Деятельность по организации торговли ценными бумагами"
    },
    {
      code: "64.91",
      name: "Деятельность по финансовому лизингу"
    }
  ],
  capital: {
    amount: 67760844000,
    currency: "RUB"
  },
  head: {
    lastName: "Греф",
    firstName: "Герман",
    middleName: "Оскарович",
    inn: "770400372208",
    position: "Президент, Председатель Правления"
  },
  founders: [
    {
      id: "1",
      type: "legal",
      name: "МИНИСТЕРСТВО ФИНАНСОВ РОССИЙСКОЙ ФЕДЕРАЦИИ",
      inn: "7710168360",
      share: 50.0000000001,
      amount: 33880422000.01,
      currency: "RUB"
    },
    {
      id: "2", 
      type: "legal",
      name: "ЦЕНТРАЛЬНЫЙ БАНК РОССИЙСКОЙ ФЕДЕРАЦИИ",
      inn: "7702235133",
      share: 49.9999999999,
      amount: 33880421999.99,
      currency: "RUB"
    }
  ],
  history: [
    {
      id: "1",
      date: "2012-07-17",
      type: "Регистрация",
      description: "Государственная регистрация юридического лица",
      details: {
        "Регистрирующий орган": "Межрайонная инспекция Федеральной налоговой службы № 46 по г. Москве",
        "Способ образования": "Создание юридического лица",
        "ОГРН": "1027700132195"
      }
    },
    {
      id: "2",
      date: "2020-03-25",
      type: "Изменение",
      description: "Изменение сведений о юридическом лице",
      details: {
        "Изменено": "Адрес (место нахождения) юридического лица",
        "Старый адрес": "117997, г. Москва, ул. Вавилова, д. 19, стр. 1",
        "Новый адрес": "117997, г. Москва, ул. Вавилова, д. 19"
      }
    },
    {
      id: "3",
      date: "2021-06-15",
      type: "Изменение",
      description: "Изменение размера уставного капитала",
      details: {
        "Старый размер": "67760844000 рублей",
        "Новый размер": "67760844000 рублей",
        "Причина": "Техническое изменение"
      }
    }
  ],
  relatedCompanies: [
    {
      id: "1",
      ogrn: "1027739609391",
      name: "АКЦИОНЕРНОЕ ОБЩЕСТВО \"СБЕРБАНК ЛИЗИНГ\"",
      relationshipType: "Дочерняя",
      status: "Действующая"
    },
    {
      id: "2", 
      ogrn: "1027700167110",
      name: "АКЦИОНЕРНОЕ ОБЩЕСТВО \"СБЕРБАНК СТРАХОВАНИЕ\"",
      relationshipType: "Дочерняя",
      status: "Действующая"
    },
    {
      id: "3",
      ogrn: "1027700090932",
      name: "ОБЩЕСТВО С ОГРАНИЧЕННОЙ ОТВЕТСТВЕННОСТЬЮ \"СБЕРБАНК ТЕХНОЛОГИИ\"",
      relationshipType: "Дочерняя", 
      status: "Действующая"
    }
  ]
};

/**
 * Функция для получения тестовых данных по ОГРН
 * Используется в режиме разработки когда API недоступно
 */
export function getMockCompanyByOgrn(ogrn: string): LegalEntity | null {
  if (ogrn === mockCompanyData.ogrn) {
    return mockCompanyData;
  }
  
  // Возвращаем модифицированную версию для других ОГРН
  return {
    ...mockCompanyData,
    ogrn,
    fullName: `ТЕСТОВАЯ КОМПАНИЯ ${ogrn}`,
    shortName: `ТК ${ogrn.slice(-4)}`,
    inn: `77${ogrn.slice(-8)}`,
    kpp: `${ogrn.slice(-9, -6)}01001`
  };
}

/**
 * Проверка, является ли окружение режимом разработки
 */
export const isDevelopment = process.env.NODE_ENV === "development";

/**
 * Флаг для использования mock данных
 * Можно переключать для тестирования компонентов
 */
export const useMockData = isDevelopment && process.env.NEXT_PUBLIC_USE_MOCK_DATA === "true";