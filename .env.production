# ==============================================================================
# Production Environment Configuration
# ==============================================================================
# Настройки для production окружения
# ВАЖНО: Используйте Docker secrets или другие механизмы для хранения паролей!
# ==============================================================================

# Production logging
LOG_LEVEL=warn
LOG_FORMAT=json

# GraphQL security (отключаем интроспекцию и playground в production)
GRAPHQL_PLAYGROUND_ENABLED=false
GRAPHQL_INTROSPECTION_ENABLED=false

# КРИТИЧНО: Измените эти пароли!
# В production используйте Docker secrets или переменные окружения сервера
CLICKHOUSE_USER=egrul_app
CLICKHOUSE_PASSWORD=CHANGE_ME_IN_SECRETS
POSTGRES_PASSWORD=CHANGE_ME_IN_SECRETS
MINIO_ROOT_PASSWORD=CHANGE_ME_IN_SECRETS
GF_SECURITY_ADMIN_PASSWORD=CHANGE_ME_IN_SECRETS

# Увеличенные ресурсы для production
CLICKHOUSE_MEMORY_LIMIT=32G
ES_JAVA_OPTS=-Xms2g -Xmx2g
KAFKA_HEAP_OPTS=-Xms1g -Xmx1g

# Настройки импорта для production (больше памяти, меньше батчей)
HISTORY_MAX_MEMORY=10000000000
HISTORY_BUCKETS=5
OPTIMIZE_AFTER_IMPORT=true

# Frontend production mode
NEXT_PUBLIC_DEBUG=false
NODE_ENV=production
WATCHPACK_POLLING=false

# Большие батчи для эффективности
PARSER_BATCH_SIZE=5000
PARSER_CHANNEL_BUFFER_SIZE=10000

# Production API URLs (измените на ваш домен)
NEXT_PUBLIC_API_URL=https://your-domain.com/api/v1
NEXT_PUBLIC_GRAPHQL_URL=https://your-domain.com/graphql

# Resource limits для docker-compose.prod.yml
POSTGRES_CPU_LIMIT=2
POSTGRES_MEMORY_LIMIT=4G
CLICKHOUSE_CPU_LIMIT=8
CLICKHOUSE_ULIMIT_NOFILE=524288
ELASTICSEARCH_CPU_LIMIT=4
ELASTICSEARCH_MEMORY_LIMIT=8G
KAFKA_MEMORY_LIMIT=2G
