# API Документация

## Базовый URL

```
http://localhost:8080/api/v1
```

## Аутентификация

В текущей версии аутентификация не требуется.

---

## Endpoints

### Health Check

```http
GET /health
```

**Ответ:**
```json
{
  "status": "ok",
  "service": "api-gateway"
}
```

---

## Юридические лица

### Список юридических лиц

```http
GET /api/v1/legal-entities
```

**Параметры запроса:**

| Параметр | Тип | Описание |
|----------|-----|----------|
| `page` | integer | Номер страницы (по умолчанию: 1) |
| `page_size` | integer | Размер страницы (по умолчанию: 20, макс: 100) |
| `status` | string | Фильтр по статусу (active, liquidated) |

**Ответ:**
```json
{
  "data": [
    {
      "id": "uuid",
      "ogrn": "1027700132195",
      "inn": "7707083893",
      "kpp": "770701001",
      "full_name": "ПУБЛИЧНОЕ АКЦИОНЕРНОЕ ОБЩЕСТВО \"ГАЗПРОМ\"",
      "short_name": "ПАО \"ГАЗПРОМ\"",
      "registration_date": "2002-08-02",
      "status": "active",
      "address": {
        "full_address": "117997, г. Москва, ул. Наметкина, д. 16"
      }
    }
  ],
  "total": 1000,
  "page": 1,
  "page_size": 20
}
```

### Получение юридического лица по ОГРН

```http
GET /api/v1/legal-entities/:ogrn
```

**Параметры пути:**

| Параметр | Тип | Описание |
|----------|-----|----------|
| `ogrn` | string | ОГРН организации (13 цифр) |

**Ответ:**
```json
{
  "id": "uuid",
  "ogrn": "1027700132195",
  "inn": "7707083893",
  "kpp": "770701001",
  "full_name": "ПУБЛИЧНОЕ АКЦИОНЕРНОЕ ОБЩЕСТВО \"ГАЗПРОМ\"",
  "short_name": "ПАО \"ГАЗПРОМ\"",
  "registration_date": "2002-08-02",
  "status": "active",
  "address": {
    "postal_code": "117997",
    "region": "Москва",
    "city": "Москва",
    "street": "ул. Наметкина",
    "house": "16",
    "full_address": "117997, г. Москва, ул. Наметкина, д. 16"
  },
  "main_activity": {
    "code": "06.10",
    "name": "Добыча сырой нефти и природного газа"
  },
  "capital": {
    "amount": 118367564500.00,
    "currency": "RUB"
  },
  "head": {
    "last_name": "Миллер",
    "first_name": "Алексей",
    "middle_name": "Борисович",
    "position": "Председатель Правления"
  }
}
```

### Поиск юридических лиц

```http
GET /api/v1/legal-entities/search
```

**Параметры запроса:**

| Параметр | Тип | Описание |
|----------|-----|----------|
| `q` | string | Поисковый запрос (название, ИНН, ОГРН) |
| `page` | integer | Номер страницы |
| `page_size` | integer | Размер страницы |

**Пример:**
```http
GET /api/v1/legal-entities/search?q=газпром
```

---

## Индивидуальные предприниматели

### Список ИП

```http
GET /api/v1/entrepreneurs
```

**Параметры запроса:**

| Параметр | Тип | Описание |
|----------|-----|----------|
| `page` | integer | Номер страницы |
| `page_size` | integer | Размер страницы |
| `status` | string | Фильтр по статусу |

### Получение ИП по ОГРНИП

```http
GET /api/v1/entrepreneurs/:ogrnip
```

**Параметры пути:**

| Параметр | Тип | Описание |
|----------|-----|----------|
| `ogrnip` | string | ОГРНИП (15 цифр) |

### Поиск ИП

```http
GET /api/v1/entrepreneurs/search
```

**Параметры запроса:**

| Параметр | Тип | Описание |
|----------|-----|----------|
| `q` | string | Поисковый запрос (ФИО, ИНН, ОГРНИП) |

---

## Глобальный поиск

```http
GET /api/v1/search
```

Поиск одновременно по юридическим лицам и ИП.

**Параметры запроса:**

| Параметр | Тип | Описание |
|----------|-----|----------|
| `q` | string | Поисковый запрос |

**Ответ:**
```json
{
  "query": "газпром",
  "legal_entities": [...],
  "entrepreneurs": [...],
  "total": 150
}
```

---

## Коды ошибок

| Код | Описание |
|-----|----------|
| 200 | Успешный запрос |
| 400 | Некорректный запрос |
| 404 | Ресурс не найден |
| 500 | Внутренняя ошибка сервера |

**Формат ошибки:**
```json
{
  "error": "Описание ошибки",
  "code": "ERROR_CODE"
}
```

